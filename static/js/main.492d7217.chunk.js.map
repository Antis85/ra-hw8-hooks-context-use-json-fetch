{"version":3,"sources":["hooks/useJsonFetch.js","components/Loading.js","components/Data.js","components/Error.js","App.js","index.js"],"names":["useJsonFetch","url","opts","useState","data","setData","loading","setLoading","error","setError","useEffect","canceled","fetch","then","response","ok","prev","status","text","statusText","json","result","catch","e","message","finally","fetchData","Loading","props","className","Data","Error","App","process","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4QAEe,SAASA,EAAaC,EAAKC,GAAO,IAAD,EACtBC,mBAAS,MADa,mBACvCC,EADuC,KACjCC,EADiC,OAEhBF,oBAAS,GAFO,mBAEvCG,EAFuC,KAE9BC,EAF8B,OAGpBJ,mBAAS,IAHW,mBAGvCK,EAHuC,KAGhCC,EAHgC,KA0C9C,OArCAC,qBAAU,WACR,IAAIC,GAAW,EAkCf,OAjCkB,WAChB,IAAIA,EAIJJ,GAAW,GAEJK,MAAMX,GACVY,MAAK,SAACC,GAQL,GAPKA,EAASC,IACZN,GAAS,SAACO,GAAD,mBAAC,eACLA,GADI,IAEPC,OAAQH,EAASG,OACjBC,KAAMJ,EAASK,iBAGdR,EAAU,OAAOG,EAASM,UAEhCP,MAAK,SAACQ,GACLhB,GAAQ,MAETiB,OAAM,SAACC,GACNd,GAAS,SAACO,GAAD,mBAAC,eACLA,GADI,IAEPQ,QAASD,EAAEC,gBAGdC,SAAQ,WACPlB,GAAW,MAIjBmB,GACO,kBAAOf,GAAW,KACxB,CAACV,EAAKC,IACF,CAAEE,OAAME,UAASE,S,WCzCX,SAASmB,EAAQC,GAAQ,IAE9BtB,EAAYN,EADN4B,EAAP3B,KACCK,QACR,OACE,sBAAKuB,UAAU,oBAAf,UACE,uHACA,4BAAIvB,EAAU,+EAAqB,2ECN1B,SAASwB,EAAKF,GAAQ,IAE3BxB,EAASJ,EADH4B,EAAP3B,KACCG,KACR,OACE,sBAAKyB,UAAU,iBAAf,UACE,sEACA,4BAAIzB,EAAO,mDAAa,0ECNf,SAAS2B,EAAMH,GAAQ,IAE5BpB,EAAUR,EADJ4B,EAAP3B,KACCO,MACAgB,EAA0BhB,EAA1BgB,QAASP,EAAiBT,EAAjBS,OAAQC,EAASV,EAATU,KACzB,OACE,qBAAKW,UAAU,kBAAf,SACGL,GAAWP,GAAUC,EACpB,wEAEE,4BAAIM,IACJ,4BAAIP,IACJ,4BAAIC,OAGN,0F,MCXO,SAASc,IACtB,OACE,qCACE,cAACL,EAAD,CAAS1B,IAAKgC,oDACd,cAACH,EAAD,CAAM7B,IAAKgC,iDACX,cAACF,EAAD,CAAO9B,IAAKgC,sDCNlBC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.492d7217.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\n\nexport default function useJsonFetch(url, opts) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState({});\n\n  useEffect(() => {\n    let canceled = false;\n    const fetchData = () => {\n      if (canceled) {\n        return;\n      }\n\n      setLoading(true);\n\n      return fetch(url)\n        .then((response) => {\n          if (!response.ok) {\n            setError((prev) => ({\n              ...prev,\n              status: response.status,\n              text: response.statusText,\n            }));\n          }\n          if (!canceled) return response.json();\n        })\n        .then((result) => {\n          setData(true);\n        })\n        .catch((e) => {\n          setError((prev) => ({\n            ...prev,\n            message: e.message,\n          }));\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    };\n\n    fetchData();\n    return () => (canceled = true);\n  }, [url, opts]);\n  return { data, loading, error };\n}\n","import React from 'react';\nimport useJsonFetch from '../hooks/useJsonFetch';\n\nexport default function Loading(props) {\n  const {url} = props;\n  const { loading } = useJsonFetch(url);\n  return (\n    <div className=\"component loading\">\n      <p>Статус загрузки:</p>\n      <p>{loading ? 'идет загрузка...' : 'нет загрузки'}</p>\n    </div>\n  );\n}\n","import React from 'react';\nimport useJsonFetch from '../hooks/useJsonFetch';\n\nexport default function Data(props) {\n  const {url} = props;\n  const { data } = useJsonFetch(url);\n  return (\n    <div className=\"component data\">\n      <p>Данные:</p>\n      <p>{data ? 'получены' : 'отсутствуют'}</p>\n    </div>\n  );\n}","import React from 'react';\nimport useJsonFetch from '../hooks/useJsonFetch';\n\nexport default function Error(props) {\n  const {url} = props;\n  const { error } = useJsonFetch(url);\n  const { message, status, text } = error;\n  return (\n    <div className=\"component error\">\n      {message || status || text ? (\n        <div>\n          Ошибка!\n          <p>{message}</p>\n          <p>{status}</p>\n          <p>{text}</p>\n        </div>\n      ) : (\n        <p>Нет ошибок</p>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport Loading from './components/Loading';\nimport Data from './components/Data';\nimport Error from './components/Error';\nimport './App.css';\n\nexport default function App() {\n  return (\n    <>\n      <Loading url={process.env.REACT_APP_URL_LOADING_BUILD} />\n      <Data url={process.env.REACT_APP_URL_DATA_BUILD} />\n      <Error url={process.env.REACT_APP_URL_ERROR_BUILD} />\n    </>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}